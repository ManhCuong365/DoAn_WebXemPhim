<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <title>Danh sách phim</title>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

</head>

<body>
  <div class="container">
    <aside class="sidebar">
      <div class="logo">MOVIE<span style="color: #ffbe00;">ZONE</span></div>
      <nav>
        <ul>
          <li class="side_bar">
            <a href="/dashboard">
              <i class="fa-solid fa-table-cells-large"></i>
              <span>DASHBOARD</span>
            </a>
          </li>
          <li class="side_bar">
            <a href="/displayMovie">
              <i class="fa-solid fa-film"></i>
              <span>MOVIE</span>
            </a>
          </li>
          <li class="side_bar">
            <a href="director.html">
              <i class="fa-solid fa-user-tie"></i>
              <span>DIRECTOR</span>
            </a>
          </li>
          <li class="side_bar">
            <a href="dienvien.html">
              <i class="fa-solid fa-users"></i>
              <span>ACTOR</span>
            </a>
          </li>
          <li class="side_bar active">
            <a href="/get-crud">
              <i class="fa-solid fa-user"></i>
              <span>USER</span>
            </a>
          </li>
          <li class="side_bar">
            <a href="#">
              <i class="fa-solid fa-tags"></i>
              <span>CATEGORY</span>
            </a>
          </li>
          <li class="side_bar"><a href="/">
              <i class="fa-solid fa-arrow-left"></i>
              <span>BACK TO SITE</span>
            </a></li>
        </ul>
      </nav>
    </aside>

    <main class="main-content">
      <header class="main-header">
        <p style="color: white;">Movie</p>
        <div style="color: white;" class="admin">
          <i class="fa-solid fa-user-shield" style="margin-right:6px;"></i> ManhCuong
        </div>
      </header>
      <div class="actions">
        <a href="/get-movie" class="btn">Add item</a>
        <a href="phim.html" class="btn btn-refresh">Refresh</a>
      </div>

      <div class="table-box">
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>TITLE</th>
              <th>RATING</th>
              <th>CATEGORY</th>
              <th>ACTOR</th>
              <th>STATUS</th> <!-- Thêm dòng này -->
              <th>CREATED AT</th>
              <th>ACTION</th>
            </tr>
          </thead>

          <tbody>
            <% if (dataTable && dataTable.length> 0) { %>
              <% dataTable.forEach(function(movie, idx) { %>
                <tr>
                  <td>
                    <%= idx + 1 %>
                  </td>
                  <td>
                    <%= movie.title %>
                  </td>
                  <td>
                    <i style="margin-right: 4px; color: #ffbe00;" class="fa-solid fa-star"></i>
                    <%= movie.rating %>
                  </td>
                  <td>
                    <% if (movie.category) { %>
                      <% movie.category.split(',').forEach(function(cat) { %>
                        <span class="tag">
                          <%= cat.trim() %>
                        </span>
                        <% }) %>
                          <% } %>
                  </td>
                  <td>
                    <%= movie.actors %>
                  </td>
                  <td>
                    <% if (movie.status==='active' ) { %>
                      <span class="status-tag active">Active</span>
                      <% } else if (movie.status==='inactive' ) { %>
                        <span class="status-tag inactive">Inactive</span>
                        <% } %>
                  </td>
                  <td style="text-align: center;">
                    <%= movie.createdAt ? new Date(movie.createdAt).toLocaleDateString('de-DE') : '' %>
                  </td>
                  <td>
                    <a href="/edit-movie?id=<%= movie.id %>" class="btn-edit" type="button" title="Sửa">
                      <i class="fa-solid fa-pen-to-square"></i>
                    </a>
                    <a href="/delete-movie?id=<%= movie.id %>" class="btn-delete" type="button" title="Xóa"
                      onclick="return confirm('Bạn có chắc muốn xóa?')">
                      <i class="fa-solid fa-trash"></i>
                    </a>
                  </td>
                </tr>
                <% }) %>
                  <% } else { %>
                    <tr>
                      <td colspan="8">Không có dữ liệu phim</td>
                    </tr>
                    <% } %>
          </tbody>
        </table>
      </div>
    </main>
  </div>

</body>

</html>