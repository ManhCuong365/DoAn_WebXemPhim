<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <title>Danh sách phim</title>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

</head>

<body>
  <div class="container">
    <aside class="sidebar">
      <div class="logo">MOVIE<span style="color: #ffbe00;">ZONE</span></div>
      <nav>
        <ul>
          <li><a href="/dashboard">DASHBOARD</a></li>
          <li style="background-color: #1d1f33;"><a href="/displayMovie">MOVIE</a></li>
          <li><a href="director.html">DIRECTOR</a></li>
          <li><a href="dienvien.html">ACTOR</a></li>

          <li class="active has-dropdown" id="userMenu">
            <div class="dropdown-toggle">
              <a href="/get-crud">USER</a>
              <i class="fa-solid fa-chevron-down chevron-icon"></i>
            </div>
          </li>
          <li>CATEGORY</li>
        </ul>
      </nav>
    </aside>

    <main class="main-content">
      <header class="main-header">
        <p style="color: white;">Movie</p>
        <div style="color: white;" class="admin">
          <i class="fa-solid fa-user-shield" style="margin-right:6px;"></i> ManhCuong
        </div>
      </header>
      <div class="actions">
        <a href="/get-movie" class="btn">Add item</a>
        <a href="phim.html" class="btn btn-refresh">Refresh</a>
      </div>

      <div class="table-box">
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>TITLE</th>
              <th>RATING</th>
              <th>CATEGORY</th>
              <th>ACTOR</th>
              <th>CREATED AT</th>
              <th>ACTION</th>
            </tr>
          </thead>

          <tbody>
            <% if (dataTable && dataTable.length> 0) { %>
              <% dataTable.forEach(function(movie, idx) { %>
                <tr>
                  <td>
                    <%= movie.id %>
                  </td>
                  <td>
                    <%= movie.title %>
                  </td>
                  <td>
                    <%= movie.rating %>
                  </td>
                  <td>
                    <% if (movie.category) { %>
                      <% movie.category.split(',').forEach(function(cat) { %>
                        <span class="tag">
                          <%= cat.trim() %>
                        </span>
                        <% }) %>
                          <% } %>
                  </td>
                  <td>
                    <%= movie.actors %>
                  </td>
                  <td>
                    <%= movie.createdAt ? movie.createdAt.getFullYear() : '' %>
                  </td>
                  <td>
                    <button class="btn-edit" type="button" title="Sửa">
                      <i class="fa-solid fa-pen-to-square"></i>
                    </button>
                    <button class="btn-delete" type="button" title="Xóa">
                      <i class="fa-solid fa-trash"></i>
                    </button>
                  </td>
                </tr>
                <% }) %>
                  <% } else { %>
                    <tr>
                      <td colspan="7">Không có dữ liệu phim</td>
                    </tr>
                    <% } %>
          </tbody>
        </table>
      </div>
    </main>
  </div>

</body>
</html>