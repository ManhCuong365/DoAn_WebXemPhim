<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MovieZone Admin Dashboard</title>
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/tabler-icons.min.css">
</head>

<body>
  <div class="container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="logo">
        <a href="/dashboard">MOVIE<span style="color: #ffbe00;">ZONE</span></a>
      </div>
      <div style="margin-left: 0;" class="side_bar1">
        <div style="display: flex; align-items: center; gap: 12px; padding: 16px 0; padding-left: 20px;">
          <span class="icon_admin">
            <i class="ti ti-user"></i>
          </span>
          <div class="icon_admin1">
            <div class="title_admin">Admin</div>
            <div class="name_admin">ManhCuong</div>
          </div>
        </div>
      </div>
      <nav class="nav">
        <ul>
          <li class="side_bar">
            <a style="color: #ffbe00;" href="/dashboard">
              <i class="fa-solid fa-table-cells-large"></i>
              <span>DASHBOARD</span>
            </a>
          </li>
          <li class="side_bar">
            <a href="/displayMovie">
              <i class="fa-solid fa-film"></i>
              <span>MOVIE</span>
            </a>
          </li>
          <li class="side_bar">
            <a href="#">
              <i class="fa-solid fa-user-tie"></i>
              <span>DIRECTOR</span>
            </a>
          </li>
          <li class="side_bar">
            <a href="#">
              <i class="fa-solid fa-users"></i>
              <span>ACTOR</span>
            </a>
          </li>
          <li class="side_bar active">
            <a href="/get-crud">
              <i class="fa-solid fa-user"></i>
              <span>USER</span>
            </a>
          </li>
          <li class="side_bar">
            <a href="/displayComment">
              <i class="fa-solid fa-tags"></i>
              <span>COMMENT</span>
            </a>
          </li>
          <li class="side_bar"><a href="/">
              <i class="fa-solid fa-arrow-left"></i>
              <span>BACK TO SITE</span>
            </a></li>
        </ul>
      </nav>
    </aside>

    <!-- Main -->
    <main class="main-content">
      <header class="main-header">
        <div class="actions">
          <p style="color: white;">Dashboard</p>
        </div>
      </header>

      <!-- Summary cards -->
      <section class="overview">
        <div class="card">
          <div class="card-header">
            <div>
              <div class="label">Users this month</div>
              <div class="value">
                <%= usersThisMonth %>
              </div>
            </div>
            <i class="fa-solid fa-gem icon-yellow"></i>
          </div>
        </div>
        <div class="card">
          <div class="card-header">
            <div>
              <div class="label">Items added this month</div>
              <div class="value">
                <%= itemsAddedThisMonth %>
              </div>
            </div>
            <i class="fa-solid fa-film icon-yellow"></i>
          </div>
        </div>
        <div class="card">
          <div class="card-header">
            <div>
              <div class="label">Comments this month</div>
              <div class="value">
                <%= commentsThisMonth %>
              </div>
            </div>
            <i class="fa-solid fa-eye icon-yellow"></i>
          </div>
        </div>
        <div class="card">
          <div class="card-header">
            <div>
              <div class="label">Favorite this month</div>
              <div class="value">
                <%= favoritesThisMonth %>
              </div>
            </div>
            <i class="fa-solid fa-star icon-yellow"></i>
          </div>
        </div>
      </section>

      <!-- Tables -->
      <section class="tables">
        <div class="card table-card">
          <div class="table-header">
            <div class="title"><i class="fa-solid fa-trophy"></i> Top items</div>
            <div class="actions">
              <a href="/dashboard" class="icon-btn"><i class="fa-solid fa-rotate-right"></i></a>
              <a href="/displayMovie" class="view-btn">View All</a>
            </div>
          </div>
          <table class="auto-width-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>TITLE</th>
                <th>CATEGORY</th>
                <th>RATING</th>
              </tr>
            </thead>
            <tbody>
              <% if (topItems && topItems.length> 0) { %>
                <% topItems.forEach(function(item) { %>
                  <tr>
                    <td>
                      <%= item.id %>
                    </td>
                    <td>
                      <%= item.title %>
                    </td>
                    <td>
                      <%= item.category %>
                    </td>
                    <td><span class="rating">
                        <ti style="margin-right: 4px;" class="ti ti-star"></ti>
                        <%= item.rating %>
                      </span></td>
                  </tr>
                  <% }) %>
                    <% } else { %>
                      <tr>
                        <td colspan="4">Không có dữ liệu</td>
                      </tr>
                      <% } %>
            </tbody>
          </table>
        </div>

        <div class="card table-card">
          <div class="table-header">
            <div class="title"><i class="fa-solid fa-film"></i> Latest items</div>
            <div class="actions">
              <a href="/dashboard" class="icon-btn"><i class="fa-solid fa-rotate-right"></i></a>
              <a href="/displayMovie" class="view-btn">View All</a>
            </div>
          </div>
          <table class="auto-width-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>ITEM</th>
                <th>CATEGORY</th>
                <th>RATING</th>
              </tr>
            </thead>
            <tbody>
              <% if (latestItems && latestItems.length> 0) { %>
                <% latestItems.forEach(function(item) { %>
                  <tr>
                    <td>
                      <%= item.id %>
                    </td>
                    <td>
                      <%= item.title %>
                    </td>
                    <td>
                      <%= item.category %>
                    </td>
                    <td><span class="rating">
                        <ti style="margin-right: 4px;" class="ti ti-star"></ti>
                        <%= item.rating %>
                      </span></td>
                  </tr>
                  <% }) %>
                    <% } else { %>
                      <tr>
                        <td colspan="4">Không có dữ liệu</td>
                      </tr>
                      <% } %>
            </tbody>
          </table>
        </div>
      </section>

      <section class="tables">
        <div class="card table-card">
          <div class="table-header">
            <div class="title"><i class="fa-solid fa-users"></i> Latest users</div>
            <div class="actions">
              <a href="/dashboard" class="icon-btn"><i class="fa-solid fa-rotate-right"></i></a>
              <a href="/get-crud" class="view-btn">View All</a>
            </div>
          </div>
          <table class="auto-width-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>EMAIL</th>
                <th>USERNAME</th>
              </tr>
            </thead>
            <tbody>
              <% if (latestUsers && latestUsers.length> 0) { %>
                <% latestUsers.forEach(function(user) { %>
                  <tr>
                    <td>
                      <%= user.id %>
                    </td>
                    <td>
                      <%= user.email %>
                    </td>
                    <td>
                      <%= user.username %>
                    </td>
                  </tr>
                  <% }) %>
                    <% } else { %>
                      <tr>
                        <td colspan="4">Không có dữ liệu</td>
                      </tr>
                      <% } %>
            </tbody>
          </table>
        </div>

        <div class="card table-card">
          <div class="table-header">
            <div class="title"><i class="fa-solid fa-star"></i> Latest favorite</div>
            <div class="actions">
              <a href="/dashboard" class="icon-btn"><i class="fa-solid fa-rotate-right"></i></a>
              <a href="/displayComment" class="view-btn">View All</a>
            </div>
          </div>
          <table class="auto-width-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>ITEM</th>
                <th>USER</th>
                <th>RATING</th>
              </tr>
            </thead>
            <tbody>
              <% if (latestFavorite && latestFavorite.length> 0) { %>
                <% latestFavorite.forEach(function(favorite) { %>
                  <tr>
                    <td>
                      <%= favorite.Movie ? favorite.Movie.id : '' %>
                    </td>
                    <td>
                      <%= favorite.Movie ? favorite.Movie.title : '' %>
                    </td>
                    <td>
                      <%= favorite.User ? favorite.User.username : '' %>
                    </td>
                    <td><span class="rating">
                        <ti style="margin-right: 4px;" class="ti ti-star"></ti>
                        <%= favorite.Movie ? favorite.Movie.rating : '' %>
                      </span></td>
                  </tr>
                  <% }) %>
                    <% } else { %>
                      <tr>
                        <td colspan="4">Không có dữ liệu</td>
                      </tr>
                      <% } %>
            </tbody>
          </table>
        </div>
      </section>
    </main>
  </div>

</body>

</html>